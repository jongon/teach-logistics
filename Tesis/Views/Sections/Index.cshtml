@model IEnumerable<Tesis.Models.Semester>

@{
	ViewBag.Title = "Índice";
}

<div class="row wrapper border-bottom white-bg page-heading">
	<div class="col-sm-4">
		<h2>Índice</h2>
		<ol class="breadcrumb">
			<li class="active">
				<strong>Sección</strong>
			</li>
		</ol>
	</div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
	@Html.Flash()
	<div class="row">
		<div class="col-lg-12">
			<div class="ibox float-e-margins">
				<div class="ibox-title">
					<h5>Lista de Semestres y sus secciones</h5>
					<div class="ibox-tools">
						@Html.ActionLink("Crear sección", "Create", null, new { @class = "btn btn-primary btn-xs" })
					</div>
				</div>
				<div class="ibox-content">
					<div class="dd" id="nestable">
						<ol class="dd-list">
							@foreach (var semester in Model) {
								<li class="dd-item">
									<div class="dd-handle dd-nodrag"><b>Semestre: </b>@semester.Description</div>
									<ol class="dd-list">
									@foreach (var item in semester.Sections)
									{
										<li class="dd-item">
											<div class="row dd-handle dd-nodrag">
												<div class="col-md-12">
													<div class="col-md-8"><b>Sección: </b>@item.Number</div>
													@Html.ActionLink("Detalles", "Details", new { id = item.Id }, new { @class = "btn btn-primary btn-xs" })
													@Html.ActionLink("Editar", "Edit", new { id = item.Id }, new { @class = "btn btn-warning btn-xs" })
													@Html.ActionLink("Eliminar", "Delete", new { id = item.Id }, new { @class = "btn btn-danger btn-xs" })
												</div>	
											</div>
										</li>
									}
									</ol>
								</li>
							}				
						</ol>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
@section Scripts {
	@Scripts.Render("~/plugins/nestable")
	<script>
		$(document).ready(function () {
			// activate Nestable for list 1
			$('#nestable').nestable({
				group: 0
			});
			$('#nestable').nestable('collapseAll');
		});

		//$(".dd").on("click", function (event) { // click event
		//	event.preventDefault();
		//	window.location = $(this).attr("href");
		//	return false;
		//});

		$(".dd-nodrag").on("mousedown", function (event) { // mousedown prevent nestable click
			event.preventDefault();
			return false;
		});

		//$(".dd-nodrag").on("click", function (event) { // click event
		//	event.preventDefault();
		//	return false;
		//});
	</script>
}
